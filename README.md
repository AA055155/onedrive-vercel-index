<div align="center">
  <img src="./public/header.png" alt="onedrive-vercel-index" />
  <h3><a href="https://drive.swo.moe">onedrive-vercel-index</a></h3>
  <p><a href="https://ovi.swo.moe/docs/getting-started">Get started</a> · <a href="https://ovi.swo.moe/blog/whats-new">What's new?</a> · <a href="https://ovi.swo.moe/sponsor/ways">Sponsoring</a></p>
  <p><em>OneDrive public directory listing, powered by Vercel and Next.js</em></p>

  <img src="https://img.shields.io/badge/OneDrive-2C68C3?style=flat&logo=microsoft-onedrive&logoColor=white" alt="OneDrive" />
  <img src="https://img.shields.io/badge/Next.js-black?style=flat&logo=next.js&logoColor=white" alt="Next.js" />
  <img src="https://img.shields.io/badge/Vercel-black?style=flat&logo=Vercel&logoColor=white" alt="Vercel" />
  <a href="https://ovi.swo.moe"><img src="https://img.shields.io/badge/Documentation-black?style=flat&logo=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAABeUlEQVRIie2VwUrDQBCGZ5ZubNmS0Ba9tF6CUqTHpg+g+AhCn8R30DfpM3jRezdHoZJroaBJQ2qgsIEdD7YSsCtJVBTxP87u/t/u7M4swDcLTQNSSseyLFbERCmlPc9LCgF83z/jnE9s294vvk+AJEmesiwbe553awQEQbCXZVnY7/ebjBXa/Ju01jCbzVIA6AwGA7WN1/KT4jg+6vV6TcYYpGlKq9UKiQgAAOr1OnU6HWNKGWPQarWa8/n8GADudwIQ0UJ89QjDEKMoOiEitRm7tm37gnNuPAUiAiJa+VjNNJmIYDgcPiAiAQD4vh9tT1NG5RJdQT8PkFKak/5ZgJTyUgjxPJ1Ob4josArAeMmWZYHrulftdhvX6/X5YrEwPtFKgG63C7ApxEajga7rVvH/BZf8D/hjACJSVRpabj1su+9OgBAiiOM41VqXNtdaw3K5TIUQQT7+rjqllKec84njOAdlAEmSPCqlxqPR6O5DQA70JZ/+t+sFAb2R22dSZ7wAAAAASUVORK5CYII=" alt="Documentation" /></a>
  <a href="https://github.com/spencerwooo/onedrive-vercel-index/discussions"><img src="https://img.shields.io/github/discussions/spencerwooo/onedrive-vercel-index?color=CF2B5B&labelColor=black&logo=github" alt="GitHub Discussions" /></a>
</div>

## TL;DR

Showcase, share, preview, and download files inside *your* OneDrive with onedrive-vercel-index -

- Completely free to host 💸
- Super fast ⚡ and responsive 💦
- Takes less than 15 minutes to setup ⏱️
- Highly customisable ⚒️

🍌 More importantly, we are pretty (●'◡'●)

## Quick start

🚀 Quick start: [Getting started](https://ovi.swo.moe/docs/getting-started).

## Discussion

Please go to our [discussion forum](https://github.com/spencerwooo/onedrive-vercel-index/discussions) for general questions and FAQs, **issues are for bug reports and bug reports only.** Feature requests may or may not be ignored, as [I (@spencerwooo)](https://spencerwoo.com) am the only one maintaining the project, so **I only prioritise features that I use.**

*If you happen to like this project, please give it a star!* :3

*If you really, really like this project, please send money! -> [Sponsors 🤑 and donations 💰](https://ovi.swo.moe/sponsor/ways)*

## Demo

Live demo at [Spencer's OneDrive](https://drive.swo.moe).

![demo](./public/demo.png)

## Features

<table>
  <tbody>
    <tr>
      <td>
        <a
          href="https://drive.swo.moe/Lecture%20and%20Coursework%20CS%20(BIT)/2019%20-%20%E5%A4%A7%E4%B8%89%E4%B8%8B%20-%20%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E4%B8%8E%E8%AE%BE%E8%AE%A1/n1570.pdf"
          >👀 File preview</a
        >
      </td>
      <td>
        <a
          href="https://drive.swo.moe/%F0%9F%8D%87%20Wallpaper"
          >💠  List / Grid layouts</a
        >
      </td>
      <td>
        <a
          href="https://drive.swo.moe/%F0%9F%8D%A1%20Genshin%20PV/New%20version%20PV/TGA2021%E3%80%8A%E5%8E%9F%E7%A5%9E%E3%80%8B%E5%8F%82%E9%80%89%E8%A7%86%E9%A2%91.mp4"
          >🎥 Video and audio</a
        >
      </td>
    </tr>
    <tr>
      <td>PDF, EPUB, markdown, code, plain text</td>
      <td>For previewing images and documents with thumbnails</td>
      <td>mp4, mp3, ..., play online or with IINA, PotPlayer ... with subtitles!</td>
    </tr>
    <tr>
      <td>
        <a
          href="https://drive.swo.moe/Lecture%20and%20Coursework%20CS%20(BIT)/2017%20-%20%E5%A4%A7%E4%BA%8C%E4%B8%8A%20-%20%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/1%20%E7%BB%AA%E8%AE%BA.pptx"
          >📄 Office preview</a
        >
      </td>
      <td><a href="https://drive.swo.moe/%F0%9F%A5%9F%20Some%20test%20files/Articles">📝 README.md preview</a></td>
      <td><a href="https://drive.swo.moe/%F0%9F%A5%9F%20Some%20test%20files/Imagenette">📑 Pagination</a></td>
    </tr>
    <tr>
      <td>docx, pptx, xlsx, ...</td>
      <td>Also renders code blocks, images with relative links, ...</td>
      <td>For folders with 200 or more items</td>
    </tr>
    <tr>
      <td><a href="https://drive.swo.moe/%F0%9F%8C%9E%20Private%20folder">🔒 Protected folders</a></td>
      <td><a href="https://drive.swo.moe/%F0%9F%8D%8A%20Weibo%20emotes/Source2">⏬ Multi-file download</a></td>
      <td>🔎 Native Search</td>
    </tr>
    <tr>
      <td>Password protected routes and files. <a href="https://ovi.swo.moe/docs/features/protected-folders">Details here</a></td>
      <td>
        Compress and download multiple files or folders.
        <a href="https://ovi.swo.moe/docs/features/multi-file-folder-download">Details here</a>
      </td>
      <td>
        Searching through your shared OneDrive files (with some caveats 🥺).
        <a href="https://ovi.swo.moe/docs/features/search-for-files-and-folders">Details here</a>
      </td>
    </tr>
  </tbody>
</table>

... and more:

- Streamlined deployment, without having to get your tokens manually anymore!
- Direct raw-file serving and hosting ...
- Full dark mode support, style and website customisations ...

> **Note**: This project is focused on showcasing and providing a way for others to download files from your OneDrive. Emphasis on **free** and **serverless**. If you have your own server / need WebDAV / use cloud providers other than OneDrive, checkout [alist](https://github.com/alist-org/alist).

## Documentation

Documentation is hosted at [ovi.swo.moe](https://ovi.swo.moe/).

- [How can I get started and deploy?](https://ovi.swo.moe/docs/getting-started)
- [How can I configure ... ?](https://ovi.swo.moe/docs/custom-configs)
- Where is feature ... ?
  - [Docs - Password protected folders](https://ovi.swo.moe/docs/features/protected-folders)
  - [Docs - Multi-file and folder download](https://ovi.swo.moe/docs/features/multi-file-folder-download)
  - [Docs - Hosting files (images) directly](https://ovi.swo.moe/docs/features/hosting-images-directly)
  - [Docs - Search for files and folders](https://ovi.swo.moe/docs/features/search-for-files-and-folders)
  - [Docs - Load video subtitles](https://ovi.swo.moe/docs/features/load-video-subtitles)
- [I deployed this before, how can I upgrade to the latest version?](https://ovi.swo.moe/docs/migration/updating-to-latest-version)
- [I was here before 2022, how can I migrate to the new version?](https://ovi.swo.moe/docs/migration/if-you-deployed-before-2022)
- [I got a problem during deployment ...](https://ovi.swo.moe/docs/faqs/error-on-deployment)
- I didn't find a solution / My problem is unique? [Find help in discussion forum](https://github.com/spencerwooo/onedrive-vercel-index/discussions).

## Server-*less* (free)?

Yes! Completely free with no backend server what-so-ever. (Well, we use Redis, but that's free to some extent also.)

## Sponsors and donations

Open-source is hard! If you happen to like this project and want me to keep going, please consider sponsoring me or providing a single donation! Thanks for all the love and support!

[🧸 Please donate - 微信/支付宝](https://ovi.swo.moe/sponsor/ways) · [Patreon](https://www.patreon.com/spencerwoo) · [爱发电](https://afdian.net/@spencerwoo)

## License

[MIT](LICENSE)

<div align="center">
  <img src="./public/footer.png" />
  <em>made with ❤️ by <a href="https://spencerwoo.com">spencer woo</a></em>
</div>


## 上手文档：[onedrive-vercel-index](https://ovi.swo.moe/zh)

### 使用Next.js基于Vercel部署：https://wwww.lvmoo.com/onedrive-index/

## 注册应用【Microsoft Azure】:https://portal.azure.com/#view/Microsoft_AAD_RegisteredApps/ApplicationsListBlade

## OneDrive：https://onedrive.live.com/?id=2A8711E51C5680A1%21s98579b0d9410456081942e77acf9e0ff&cid=2A8711E51C5680A1&sb=name&sd=1



## onedrive-vercel-index只能分享文件吗？不能上传和下载文件吗？

onedrive-vercel-index 的核心功能定位为 ‌**OneDrive 文件的索引展示与共享**‌，其原生设计不支持直接上传文件 12。关于上传和下载能力的详细分析如下：

------

### ‌**功能边界解析**‌

| 功能模块     | 支持情况               | 说明                                                         |
| ------------ | ---------------------- | ------------------------------------------------------------ |
| ‌**文件展示**‌ | ✅ 完整支持             | 支持目录结构展示、多格式文件预览（文档/图片/音视频）12       |
| ‌**文件分享**‌ | ✅ 通过生成公开链接实现 | 支持密码保护和过期时间设置（需配合 OneDrive 原生功能）26     |
| ‌**文件下载**‌ | ⚠️ 条件性支持           | 默认开启下载功能，但受限于 OneDrive 权限策略（如「仅查看」模式禁用下载）56 |
| ‌**文件上传**‌ | ❌ 原生不支持           | 需通过 OneDrive 原生客户端或 API 自行实现 34                 |

------

### ‌**下载功能限制与解决方案**‌

1. ‌**权限配置问题**‌
   - 若分享链接设置为「仅查看」模式，前端会隐藏下载按钮（需在 OneDrive 后台调整权限为「可编辑」）6；
   - 直接通过 API 访问文件 URL 仍可绕过前端限制下载（需 `Files.ReadWrite.All` 权限）4。
2. ‌**网络环境问题**‌
   部分地区访问 OneDrive 网页端不稳定，建议改用客户端同步文件或通过 Vercel 代理加速访问 7。

------

### ‌**上传功能扩展方案**‌

若需实现上传能力，需通过以下方式扩展：

1. ‌**调用 OneDrive API**‌

   - 配置应用权限 `Files.ReadWrite.All` 并获取 `client_secret` 4；
   - 使用 Python/Node.js 等语言开发自定义上传接口 4。

   ```
   pythonCopy Code# 示例：Python 上传文件到 OneDrive
   import requests
   
   def upload_to_onedrive(file_path, access_token):
       headers = {'Authorization': f'Bearer {access_token}'}
       with open(file_path, 'rb') as f:
           response = requests.put(
               'https://graph.microsoft.com/v1.0/me/drive/root:/{filename}:/content',
               headers=headers,
               data=f
           )
       return response.status_code
   ```

2. ‌**集成第三方工具**‌
   使用 MultCloud 等工具跨平台管理文件，间接实现上传功能 5。

------

### ‌**架构局限性总结**‌

该项目作为轻量级索引工具，核心价值在于 ‌**低成本部署与可视化展示**‌，文件管理功能需依赖 OneDrive 原生能力或二次开发 12。若需完整上传/下载生态，建议结合 API 开发自定义模块或切换至全功能网盘系统 35。



## next dev和start的区别

本人github
在Next.js项目的**package.json**文件中，**dev**和**start**脚本的主要区别在于它们各自的用途和运行模式：

**dev 脚本**

```
"dev": "next dev"
```

- **用途**：这个命令用于启动Next.js的开发服务器。它允许开发者在开发过程中实时预览改动，因为它提供了热模块替换（Hot Module Replacement，HMR）功能，即在你编辑代码时无需手动刷新浏览器就能看到更新。
- **特点**：
  - 启用了快速刷新。
  - 提供了详细的错误报告和反馈。
  - 不会生成可用于生产环境的优化后代码。
  - 默认情况下，不会进行代码拆分和静态优化。
- **场景**：开发阶段，用于快速迭代和调试。

**start 脚本**

```
"start": "next start"
```

- 用途：这个命令用于启动一个为生产环境优化过的Next.js服务器。在执行这个命令之前，你需要先使用next build命令对应用进行构建，这个过程会优化应用性能，生成静态页面和服务器端渲染的代码。
- 特点：
  - 需要预先运行`next build`来构建项目。
  - 服务的是优化后的生产版本代码。
  - 支持特性如自动静态优化、服务器端渲染（SSR）、API路由等。
  - 不支持热模块替换，任何改动都需要重新构建。
- 场景：生产环境，用于部署应用。

**总结**
简而言之，**dev**命令用于开发环境，提供了开发过程中所需的实时预览和调试功能。而**start**命令则用于生产环境，运行的是经过构建和优化的应用版本，以确保最佳性能。正确使用这两个命令，可以在开发和生产阶段分别享有最佳的开发体验和应用性能。
————————————————

                            版权声明：本文为博主原创文章，遵循 CC 4.0 BY-SA 版权协议，转载请附上原文出处链接和本声明。

原文链接：https://blog.csdn.net/m0_57236802/article/details/137073172
